---
title: 深入理解es6-5
date: 2019-12-27 21:52:21
tags: 
- Javascript
- 深入理解ES6
excerpt: 数组解构和对象解构
categories: 
- 书本
---
## 深入理解ES6第五章 解构
**问题引入**
```
var obj = {
    repeat:true,
    save: false
}
//从对象中提取数据
let repeat = obj.repeat
    save = obj.save     //多了会很麻烦
```
### 对象解构
基础语法:
```
let node ={
    type :"Identifier",
    name :"foo"
}
var {type , name} =node    // 左边是个什么?对象还是数组?
console.log(type)  //Identifier
console.log(name)  //foo
```
**不要忘了初始化,既要声明也要赋值对象**
新理解:`解构后,获得的就是属性的值,通过键名获取对应的值,`
(不是{type,name}会怎样?一定要跟属性名一样才能获取对应值吗?*是的*)
({type,test} 会Identifier,undefined)
#### 解构赋值
1. 对象解构
**利用对象同名属性,赋值给外部变量,从而批量修改的做法**
**或者是*将对象的属性值根据属性名获取*的做法**

**不存在的属性给它赋默认值**
```
var {type,name,value = true} node
```
**将对象内的键名取别名**
```
var {type:localType,name:localName} = node;
```
`对象解构赋值:`
```
type="literals"
name="Hello"
({type,name} = node)       //必须要用小括号括住,代码块不能出现在赋值语句的左侧???!!!
console.log(type)  //Identifier
console.log(name)  //foo
```
**对象迭代:属性值仍然是对象**
```
let node = {
    loc:{
        start:{
            line:1
            column:2
        }
    }
}
var {loc: { start:localStart} } =node //*第一个冒号是深入,第二个是取别名*
console.log(localStart.line)     //1
console.log(localStart.column)    //2
                            //根据对象内容获取值

let {loc:{}} = node;  //错误,不能不具体到对应键.不能只深入而不取值.
```
2. 数组解构
*根据数组中的**位置**对变量赋值的做法*
数组可以看成对象:(近似,键名有限制)
```
let colors = ["red","green"]
/*{
    0:"red",
    1:"green"
}*/
var {firCo,secCo} = colors; //按顺序取值而修改掉键名
```
`数组解构赋值:`
```
let colors = ["red","green"]
firCo = "black"
secCo = "blue"
[firCo,secCo] = colors   //对象赋值是({xxx,ddd} = node).注意括号的区别
console.log(firCo)     //red
//*用对象的值覆盖变量的值
```
`交换两个变量的值:`
```
let a=1,b=2;
[a,b] = [b,a]
         //**左边是取得各自对应的值,右边是新的数组?**
```
`克隆数组`
```
//ES5中
let cloned = colors.concat()
//ES6中
let [...cloned] = colors
```
`解构对象的另一种用途`
```
setCooie(name,value,option){}   //一般option是对象,提供多个boolean给使用者,但这样不知道可以有哪些选项
setCookie(name,value,{secure,path,domain,expires}){} //解构option对象,则可明确提供有哪些选项
```
*问题是,option为空可以,设置了解构而不传入则会报错.*
```
setCookie('sth','js') //出错
```
*提供默认参数
```
(name,value,{
secure = false,
path = '/',
domain = 'xx.com',  //有好有坏,将设置的函数独立开来,可以改那个函数从而影响当前函数默认值
expires = xx
})
```






