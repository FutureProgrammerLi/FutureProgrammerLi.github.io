<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Future Li">
  <!-- Open Graph Data -->
  <meta property="og:title" content="深入理解es6-6"/>
  <meta property="og:description" content="What is this?" />
  <meta property="og:site_name" content="Hello!"/>
  <meta property="og:type" content="article" />
  <meta property="og:image" content="http://yoursite.com"/>
  
    <link rel="alternate" href="/atom.xml" title="Hello!" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  

  <!-- Site Title -->
  <title>Hello!</title>

  <!-- Bootstrap CSS -->
  
<link rel="stylesheet" href="/css/bootstrap.min.css">

  <!-- Custom CSS -->
  
  
<link rel="stylesheet" href="/css/style.light.css">


  <!-- Google Analytics -->
  

<meta name="generator" content="Hexo 4.2.0"></head>

  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/img/default-banner-dark.jpg)">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">深入理解es6-6</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/">
                  
                  Home
                  
                </a>
              </li>
            
              <li>
                <a href="/archives">
                  
                  Archives
                  
                </a>
              </li>
            
              <li>
                <a href="https://github.com/FutureProgrammerLi" target="_blank" rel="noopener">
                  
                  Github
                  
                </a>
              </li>
            
              <li>
                <a href="mailto:617612567@qq.com">
                  
                  Email
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>

<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By Future Li</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2019-12-28</span>
            <span class="time">23:25:11</span>
          </span>
          
          <!--  Categories  -->
            <span class="categories info">Under 

<a href="/categories/%E4%B9%A6%E6%9C%AC/">书本</a>
</span>
          
        </div>
        <!-- Tags -->
        
          <div class="post-tags text-muted">
            Tags: 

<a class="tag" href="/tags/Javascript/">#Javascript</a> <a class="tag" href="/tags/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3ES6/">#深入理解ES6</a>


          </div>
        
        <!-- Post Main Content -->
        <div class="post-content">
          <h3 id="深入理解es6第六章-symbol"><a href="#深入理解es6第六章-symbol" class="headerlink" title="深入理解es6第六章 symbol"></a>深入理解es6第六章 symbol</h3><h4 id="一、Symbol值"><a href="#一、Symbol值" class="headerlink" title="一、Symbol值"></a>一、Symbol值</h4><h5 id="Symbol创建"><a href="#Symbol创建" class="headerlink" title="Symbol创建"></a>Symbol创建</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let name &#x3D; Symbol(&#39;description&#39;) &#x2F;&#x2F;调用toString方法会返回description,但不能直接访问[[Description]]内部属性</span><br><span class="line">&#x2F;&#x2F;或者</span><br><span class="line">let sth &#x3D;new Symbol(&#39;description&#39;)</span><br></pre></td></tr></table></figure>

<h4 id="Symbol共享体系"><a href="#Symbol共享体系" class="headerlink" title="Symbol共享体系"></a>Symbol共享体系</h4><p><em>为了将多个不同类型对象用同一个symbo来表示一个独特的标识符?</em><br><strong>Symbol.for(‘description’) 创建在Symbo注册表中,以description为键名,值为symbol的symbol</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Symbol&#123;</span><br><span class="line">    description:symbol   &#x2F;&#x2F;只是帮助理解</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>只有用Symbol.key创建的,才能被共享</code><br>可以用Symbol.keyFor(‘sth’),根据变量名获取全局symbol注册表下的键名</p>
<h4 id="Symbol不能被类型转换-只能String-uid-获得自身描述-Symbol-uid"><a href="#Symbol不能被类型转换-只能String-uid-获得自身描述-Symbol-uid" class="headerlink" title="Symbol不能被类型转换,只能String(uid),获得自身描述//Symbol(uid)"></a>Symbol不能被类型转换,只能String(uid),获得自身描述//Symbol(uid)</h4><h3 id="Object-keys-Object-getOwnPropertyNames-返回对象的键和自身属性值-后者不考虑可枚举性-enumerable"><a href="#Object-keys-Object-getOwnPropertyNames-返回对象的键和自身属性值-后者不考虑可枚举性-enumerable" class="headerlink" title="Object.keys(),Object.getOwnPropertyNames()返回对象的键和自身属性值,后者不考虑可枚举性(enumerable)"></a>Object.keys(),Object.getOwnPropertyNames()返回对象的键和自身属性值,<em>后者不考虑可枚举性</em>(enumerable)</h3><h4 id="Object-getOwnPropertySymbols-返回键为symbol的值-是一个数组"><a href="#Object-getOwnPropertySymbols-返回键为symbol的值-是一个数组" class="headerlink" title="Object.getOwnPropertySymbols()返回键为symbol的值,是一个数组"></a>Object.getOwnPropertySymbols()返回键为symbol的值,是一个数组</h4><hr>
<h5 id="Symbol属性"><a href="#Symbol属性" class="headerlink" title="Symbol属性"></a>Symbol属性</h5><p><em>1.改写Symbol.hasInstance()属性,将普通对象改为特异对象</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function specialNumbers()&#123;&#125; </span><br><span class="line">Object.defineProperty(specialNumbers,Symbol.hasInstance,&#123; &#x2F;&#x2F;改变instanceof 的默认行为</span><br><span class="line">    value:function(v)&#123;           </span><br><span class="line">        return(v instanceof Number)&amp;&amp;(v&gt;0&amp;&amp;v&lt;&#x3D;100))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">var two &#x3D; new Number(2),</span><br><span class="line">    zero &#x3D; new Number(0)</span><br><span class="line">console.log(two instanceof specialNumbers)</span><br><span class="line">console.log(zero instanceof specialNumbers)</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="2-Symbol-isConcatSpreadable-看不懂"><a href="#2-Symbol-isConcatSpreadable-看不懂" class="headerlink" title="2.Symbol.isConcatSpreadable,看不懂"></a><em>2.Symbol.isConcatSpreadable,看不懂</em></h2><p><em>3.改写Symbol.match(),replace,search,split方法</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let hasLengthOf10 &#x3D; &#123;</span><br><span class="line">    [Symbol.match]:function(v)&#123;</span><br><span class="line">        return v.length &#x3D;&#x3D;&#x3D; 10?[v],null;   &#x2F;&#x2F;为什么是[v]?</span><br><span class="line">    &#125;,</span><br><span class="line">    [Symbol.replace]:function(v,re)&#123;</span><br><span class="line">        return v.length &#x3D;&#x3D;&#x3D; 10?re,v</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;...其它同理</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><em>4.Symbol.toPrimitive() 根据传入值的类型调用不同的方法</em><br>大多数标准对象,<em>数字模式下</em></p>
<ol>
<li>调valueOf(),看是否为原始值</li>
<li>调toString(),看是否为原始值</li>
<li>抛出错误</li>
</ol>
<p>而在字符串模式下</p>
<ol>
<li>调toString(),看是否为原始值</li>
<li>调valueOf(),看是否为原始值</li>
<li>抛出错误<br>举例说明<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function temperature(degrees)&#123;</span><br><span class="line">    this.degrees &#x3D; degrees</span><br><span class="line">&#125;</span><br><span class="line">temperature.prototype.[Symbol.toPrimitive] &#x3D; function(hint)&#123;</span><br><span class="line">    switch(hint)&#123;</span><br><span class="line">        case &#39;string&#39;:</span><br><span class="line">           return this.degrees + &#39;\u00b0&#39;;</span><br><span class="line">        case &#39;number&#39;:</span><br><span class="line">           return this.degrees;</span><br><span class="line">        case &#39;default&#39;:</span><br><span class="line">           return this.degrees +&#39;degrees!&#39;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<p><em>5.Symbol.toStringTag()修改Object.prototype.toString()方法返回的值</em><br>一般,用Object.prototype.toString().call(xxx)可以检测xxx的类型.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Object.prototype.toString.call(undefined);&#x2F;&#x2F;”[object Undefined]”</span><br><span class="line">Object.prototype.toString.call(“abc”);&#x2F;&#x2F;”[object String]”</span><br><span class="line">Object.prototype.toString.call(123);&#x2F;&#x2F;”[object Number]”</span><br></pre></td></tr></table></figure>

<p>但改了这个方法,就<code>变得不可靠了</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function Person(name)&#123;</span><br><span class="line">    this.name &#x3D; name</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.[Symbol.toStringTag] &#x3D;&quot;Array&quot;</span><br><span class="line">Person.prototype.toString &#x3D; function&#123;</span><br><span class="line">    return this.name</span><br><span class="line">&#125;</span><br><span class="line">var me &#x3D; new Person(&#39;Li&#39;)</span><br><span class="line">console.log(me.toString())     </span><br><span class="line">console.log(Object.prototype.toString().call(me))   &#x2F;&#x2F;Array,明显是错的, 真的数组会返回[object Array]</span><br></pre></td></tr></table></figure>
<p><em>甚至修改原生对象上的toStringTag()…人干事???</em><br><code>Array.prototype.[Symbol.toStringTag]=&#39;magic&#39;</code></p>
<hr>
<h4 id="插曲-with语法"><a href="#插曲-with语法" class="headerlink" title="插曲,with语法"></a>插曲,with语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var colors &#x3D; [&#39;red&#39;,&#39;green&#39;],</span><br><span class="line">			    color &#x3D; [&#39;black&#39;,&#39;pink&#39;],</span><br><span class="line">				val &#x3D; [1,2,3]</span><br><span class="line">			with (colors)&#123;</span><br><span class="line">				push(color)    &#x2F;&#x2F;black,1,pink,2还是black,pink,1,2,3?</span><br><span class="line">				push(val)     &#x2F;&#x2F;代替不了concat,单线程,color[2]是个数组</span><br><span class="line">			&#125;</span><br><span class="line">			console.log(colors)</span><br></pre></td></tr></table></figure>
<p><em>6.[Symbol.unscopable],在with语句中标识出不创建绑定的属性名(?)</em></p>

        </div>
      </div>
    </div>
  </div>
</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p class="copyright text-muted">
          Theme By <a target="_blank" href="https://github.com/levblanc">Levblanc.</a>
          Inspired By <a target="_blank" href="https://github.com/klugjo/hexo-theme-clean-blog">Clean Blog.</a>
        <p class="copyright text-muted">
          Powered By <a target="_blank" href="https://hexo.io/">Hexo.</a>
        </p>
      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->

<script src="/js/highlight.pack.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>

  </body>
</html>

